{% load static %}
{% load object_perm_set_check %}
<!-- Left side column. contains the logo and sidebar -->
<aside class="main-sidebar">
  <!-- sidebar: style can be found in sidebar.less -->
  <section class="sidebar">
    <!-- Sidebar user panel -->
    <div class="user-panel">
      <div class="pull-left image">
        <img src="{% static 'AdminLTE/img/user2-160x160.jpg' %}" class="img-circle" alt="User Image">
      </div>
      <div class="pull-left info">
        <p>{{ user.username }}</p>
        <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
      </div>

    </div>
    <!-- search form -->
      <!--
    <form action="#" method="get" class="sidebar-form">
      <div class="input-group">
        <input disabled type="text" name="q" class="form-control" placeholder="Search...">
        <span class="input-group-btn">
              <button disabled type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
              </button>
            </span>
      </div>
    </form>
    -->
    <!-- /.search form -->
    <!-- sidebar menu: : style can be found in sidebar.less -->
    <ul class="sidebar-menu" data-widget="tree">
      <li id="dashboard"><a href="/"><i class="fa fa-dashboard"></i> <span>首页</span></a></li>
      <li id="app_menu" class="treeview">
          <a href="#">
            <i class="fa fa-server"></i> <span>图书管理</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
              <li id="menu_app_book_list"><a href="{% url 'app:app_book_list' %}"><i class="fa fa-circle-o"></i>
                  图书列表</a></li>
              <li id="menu_app_author_list"><a href="{% url 'app:app_author_list' %}"><i class="fa fa-circle-o"></i>作者列表</a></li>
          </ul>

      </li>

      <li id="blog_menu" class="treeview">
          <a href="#">
              <i class="fa fa-server"></i> <span>博客管理</span>
              <span class="pull-right-container">
            <i class="fa fa-angle-left pull-right"></i>
          </span>
          </a>
          <ul class="treeview-menu">
              <li id="menu_blog_list"><a href="{% url 'blog:post_list' %}"><i class="fa fa-circle-o"></i>
                  博客列表</a></li>
{#              <li id="menu_app_author_list"><a href="{% url 'app:app_author_list' %}"><i class="fa fa-circle-o"></i>作者列表</a></li>#}
              <li id="menu_blog_perm_test"><a href="{% url 'blog:post_show' %}"><i class="fa
            fa-circle-o"></i>测试permission</a></li>
          </ul>

      </li>



      <li id="api_menu" class="treeview {% if not request.user.is_superuser %}hide{% endif %}">
          <a href="#">
            <i class="fa fa-object-group"></i> <span>api管理</span>
            <span class="pull-right-container">
              <i class="fa fa-angle-left pull-right"></i>
            </span>
          </a>
          <ul class="treeview-menu">
              <li id="menu_api"><a href="{% url 'api:docs' %}"><i class="fa fa-circle-o"></i>swagger</a></li>
          </ul>
        </li>
{#      <li id="menu_api" class="treeview">#}
{#          <a href="#">#}
{#            <i class="fa fa-database"></i> <span>任务编排</span>#}
{#            <span class="pull-right-container">#}
{#              <i class="fa fa-angle-left pull-right"></i>#}
{#            </span>#}
{#          </a>#}
{#           <ul class="treeview-menu">#}
{#                  <li id="menu_crontab" class="treeview">#}
{#                      <a href="#"><i class="fa fa-circle-o"></i>定时任务#}
{#                        <span class="pull-right-container">#}
{#                            <i class="fa fa-angle-left pull-right"></i>#}
{#                        </span>#}
{#                      </a>#}
{#                      <ul class="treeview-menu">#}
{#                        <li id="crontab_create"><a href="{% url 'app:app_index' %}"><i class="fa#}
{#                             fa-calendar-times-o"></i>添加计划</a></li>#}
{#                        <li id="crontab_list"><a href="{% url 'app:app_index' %}"><i class="fa#}
{#                             fa-list-alt"></i>任务列表</a></li>#}
{#                      </ul>#}
{#                  </li>#}
{#                  <li id="menu_ansible" class="treeview">#}
{#                      <a href="#"><i class="fa fa-circle-o"></i>Ansible#}
{#                          <span class="pull-right-container">#}
{#                              <i class="fa fa-angle-left pull-right"></i>#}
{#                          </span>#}
{#                      </a>#}
{#                      <ul class="treeview-menu">#}
{#                            <li id="ansible_create"><a href="{% url 'app:app_index' %}"><i class="fa#}
{#                             fa-cogs"></i>添加任务</a></li>#}
{#                            <li id="ansible_list"><a href="{% url 'app:app_index' %}"><i class="fa#}
{#                            fa-list-alt"></i>任务列表</a></li>#}
{#                      </ul>#}
{#                  </li>#}
{#              </ul>#}
{#      </li>#}
          <li id="deployment_menu" class="treeview">
            <a href="#">
              <i class="fa fa-area-chart"></i> <span>任务发布</span>
              <span class="pull-right-container"> <i class="fa fa-angle-left pull-right"></i> </span>
            </a>
          <ul class="treeview-menu">
              <li id="menu_deployment_list"><a href="{% url 'deployment:deployment_list' %}"><i class="fa
              fa-circle-o"></i>
                  发布列表</a></li>
              {% with request.user|permission_managerment as has_perm_manage %}
                  {% if has_perm_manage %}
                      <li id="menu_deployment_perm"><a href="{% url 'deployment:deployment_perm' %}"><i class="fa fa-circle-o"></i>
                          发布权限管理</a></li>
                  {% endif %}
              {% endwith %}
          </ul>

      </li>
        <!--
          <li id="menu_accounts" class="treeview">
            <a href="#">
              <i class="fa fa-optin-monster"></i> <span>系统管理</span>
              <span class="pull-right-container"> <i class="fa fa-angle-left pull-right"></i> </span>
            </a>
          <ul class="treeview-menu">
              <li id="menu_user"><a href="#"><i class="fa fa-circle-o"></i> 自动发现规则</a></li>
          </ul>
      </li>
          <li id="menu_accounts" class="treeview">
                <a href="#">
                  <i class="fa fa-gears"></i> <span>系统配置</span>
                  <span class="pull-right-container"> <i class="fa fa-angle-left pull-right"></i> </span>
                </a>
              <ul class="treeview-menu">
                  <li id="menu_user"><a href="#"><i class="fa fa-circle-o"></i> 操作日志</a></li>
              </ul>
          </li>
      </ul>

      </li>

      -->

        {% if request.user.is_superuser %}
            <li id="menu_accounts" class="treeview">
                  <a href="#">
                    <i class="fa fa-users"></i> <span>用户管理</span>
                    <span class="pull-right-container"> <i class="fa fa-angle-left pull-right"></i> </span>
                  </a>
                <ul class="treeview-menu">
                    <li id="menu_user"><a href="{% url 'useradmin:user_list' %}"><i class="fa fa-circle-o"></i> 用户列表</a></li>
                </ul>
            </li>
        {% endif %}
    </ul>
  </section>
  <!-- /.sidebar -->
</aside>
